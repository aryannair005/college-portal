<div class="container mt-4">
    <div class="row">
        <!-- Profile Header -->
        <div class="col-12 mb-4">
            <div class="card">
                <div class="card-body text-center">
                    <div class="profile-image-container mb-3">
                        <% if (profileUser.profile.profileImage) { %>
                            <img src="/uploads/profiles/<%= profileUser.profile.profileImage %>" 
                                 alt="Profile Picture" 
                                 class="rounded-circle profile-image"
                                 style="width: 150px; height: 150px; object-fit: cover; border: 4px solid #007bff;">
                        <% } else { %>
                            <div class="rounded-circle bg-primary d-flex align-items-center justify-content-center"
                                 style="width: 150px; height: 150px; margin: 0 auto; border: 4px solid #007bff;">
                                <i class="fas fa-user text-white" style="font-size: 4rem;"></i>
                            </div>
                        <% } %>
                    </div>
                    
                    <h3 class="mb-1">
                        <%= profileUser.profile.fullName || profileUser.username %>
                        <% if (profileUser.role === 'admin') { %>
                            <span class="badge bg-warning text-dark ms-2">
                                <i class="fas fa-user-shield"></i> Admin
                            </span>
                        <% } else { %>
                            <span class="badge bg-primary ms-2">
                                <i class="fas fa-user-graduate"></i> Student
                            </span>
                        <% } %>
                    </h3>
                    
                    <p class="text-muted mb-1">@<%= profileUser.username %></p>
                    
                    <% if (profileUser.profile.bio) { %>
                        <p class="text-muted mb-3"><%= profileUser.profile.bio %></p>
                    <% } %>
                    
                    <% if (isOwnProfile) { %>
                        <div class="d-flex justify-content-center gap-2">
                            <a href="/profile/edit" class="btn btn-primary">
                                <i class="fas fa-edit me-1"></i>Edit Profile
                            </a>
                        </div>
                    <% } else { %>
                        <div class="d-flex justify-content-center gap-2">
                            <% if (profileUser.email) { %>
                                <a href="mailto:<%= profileUser.email %>" class="btn btn-outline-primary">
                                    <i class="fas fa-envelope me-1"></i>Send Email
                                </a>
                            <% } %>
                            <% if (profileUser.profile.phone) { %>
                                <a href="tel:<%= profileUser.profile.phone %>" class="btn btn-outline-success">
                                    <i class="fas fa-phone me-1"></i>Call
                                </a>
                            <% } %>
                        </div>
                    <% } %>
                </div>
            </div>
        </div>
        
        <!-- Profile Details -->
        <div class="col-md-6 mb-4">
            <div class="card h-100">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-user me-2"></i>Personal Information
                    </h5>
                </div>
                <div class="card-body">
                    <% if (profileUser.profile.fullName) { %>
                        <div class="row mb-3">
                            <div class="col-sm-4"><strong>Full Name:</strong></div>
                            <div class="col-sm-8">
                                <%= profileUser.profile.fullName %>
                            </div>
                        </div>
                    <% } %>
                    
                    <% if (isOwnProfile || profileUser.role === 'admin') { %>
                        <div class="row mb-3">
                            <div class="col-sm-4"><strong>Email:</strong></div>
                            <div class="col-sm-8">
                                <a href="mailto:<%= profileUser.email %>" class="text-decoration-none">
                                    <%= profileUser.email %>
                                </a>
                            </div>
                        </div>
                    <% } %>
                    
                    <% if (profileUser.profile.phone && (isOwnProfile || profileUser.role === 'admin')) { %>
                        <div class="row mb-3">
                            <div class="col-sm-4"><strong>Phone:</strong></div>
                            <div class="col-sm-8">
                                <a href="tel:<%= profileUser.profile.phone %>" class="text-decoration-none">
                                    <%= profileUser.profile.phone %>
                                </a>
                            </div>
                        </div>
                    <% } %>
                    
                    <% if (profileUser.profile.dateOfBirth && isOwnProfile) { %>
                        <div class="row mb-3">
                            <div class="col-sm-4"><strong>Date of Birth:</strong></div>
                            <div class="col-sm-8">
                                <%= new Date(profileUser.profile.dateOfBirth).toLocaleDateString() %>
                            </div>
                        </div>
                    <% } %>
                    
                    <% if (profileUser.profile.address && (isOwnProfile || profileUser.role === 'admin')) { %>
                        <div class="row mb-3">
                            <div class="col-sm-4"><strong>Address:</strong></div>
                            <div class="col-sm-8">
                                <%= profileUser.profile.address %>
                            </div>
                        </div>
                    <% } %>
                    
                    <% if (!profileUser.profile.fullName && !profileUser.profile.phone && !profileUser.profile.address) { %>
                        <div class="text-center text-muted">
                            <i class="fas fa-info-circle me-2"></i>
                            No additional information available
                        </div>
                    <% } %>
                </div>
            </div>
        </div>
        
        <!-- Academic Information -->
        <div class="col-md-6 mb-4">
            <div class="card h-100">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-graduation-cap me-2"></i>Academic Information
                    </h5>
                </div>
                <div class="card-body">
                    <% if (profileUser.role === 'student' && profileUser.profile.rollNo) { %>
                        <div class="row mb-3">
                            <div class="col-sm-4"><strong>Roll Number:</strong></div>
                            <div class="col-sm-8">
                                <%= profileUser.profile.rollNo %>
                            </div>
                        </div>
                    <% } %>
                    
                    <% if (profileUser.profile.course) { %>
                        <div class="row mb-3">
                            <div class="col-sm-4"><strong>Course:</strong></div>
                            <div class="col-sm-8">
                                <%= profileUser.profile.course %>
                            </div>
                        </div>
                    <% } %>
                    
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>Role:</strong></div>
                        <div class="col-sm-8">
                            <span class="badge <%= profileUser.role === 'admin' ? 'bg-warning text-dark' : 'bg-primary' %>">
                                <%= profileUser.role.charAt(0).toUpperCase() + profileUser.role.slice(1) %>
                            </span>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-sm-4"><strong>Member Since:</strong></div>
                        <div class="col-sm-8">
                            <%= new Date(profileUser.createdAt).toLocaleDateString() %>
                        </div>
                    </div>
                    
                    <% if (!profileUser.profile.rollNo && !profileUser.profile.course) { %>
                        <div class="text-center text-muted mt-3">
                            <i class="fas fa-info-circle me-2"></i>
                            No academic information available
                        </div>
                    <% } %>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Navigation Actions -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-compass me-2"></i>Navigation
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 mb-2">
                            <a href="/dashboard" class="btn btn-outline-primary w-100">
                                <i class="fas fa-tachometer-alt me-1"></i>Dashboard
                            </a>
                        </div>
                        <div class="col-md-3 mb-2">
                            <a href="/doubts" class="btn btn-outline-info w-100">
                                <i class="fas fa-comments me-1"></i>Doubts
                            </a>
                        </div>
                        <div class="col-md-3 mb-2">
                            <% if (isOwnProfile) { %>
                                <a href="/profile" class="btn btn-outline-success w-100">
                                    <i class="fas fa-user me-1"></i>My Profile
                                </a>
                            <% } else { %>
                                <a href="/resources" class="btn btn-outline-success w-100">
                                    <i class="fas fa-book me-1"></i>Resources
                                </a>
                            <% } %>
                        </div>
                        <div class="col-md-3 mb-2">
                            <a href="/notices" class="btn btn-outline-warning w-100">
                                <i class="fas fa-bullhorn me-1"></i>Notices
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Privacy Notice -->
    <% if (!isOwnProfile) { %>
        <div class="row mt-3">
            <div class="col-12">
                <div class="alert alert-info">
                    <i class="fas fa-shield-alt me-2"></i>
                    <strong>Privacy Note:</strong> Some personal information may be hidden to protect user privacy. 
                    Only the profile owner and administrators can view all details.
                </div>
            </div>
        </div>
    <% } %>
</div>
