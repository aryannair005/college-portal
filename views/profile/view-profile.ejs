<div class="container mt-4">
    <div class="row">
        <!-- Profile Header -->
        <div class="col-12 mb-4">
            <div class="card">
                <div class="card-body text-center">
                    <div class="profile-image-container mb-3">
                        <% if (user.profile.profileImage) { %>
                            <img src="/uploads/profiles/<%= user.profile.profileImage %>" 
                                 alt="Profile Picture" 
                                 class="rounded-circle profile-image"
                                 style="width: 150px; height: 150px; object-fit: cover; border: 4px solid #007bff;">
                        <% } else { %>
                            <div class="rounded-circle bg-primary d-flex align-items-center justify-content-center"
                                 style="width: 150px; height: 150px; margin: 0 auto; border: 4px solid #007bff;">
                                <i class="fas fa-user text-white" style="font-size: 4rem;"></i>
                            </div>
                        <% } %>
                    </div>
                    
                    <h3 class="mb-1">
                        <%= user.profile.fullName || user.username %>
                        <% if (user.role === 'admin') { %>
                            <span class="badge bg-warning text-dark ms-2">
                                <i class="fas fa-user-shield"></i> Admin
                            </span>
                        <% } else { %>
                            <span class="badge bg-primary ms-2">
                                <i class="fas fa-user-graduate"></i> Student
                            </span>
                        <% } %>
                    </h3>
                    
                    <p class="text-muted mb-1">@<%= user.username %></p>
                    
                    <% if (user.profile.bio) { %>
                        <p class="text-muted mb-3"><%= user.profile.bio %></p>
                    <% } %>
                    
                    <div class="d-flex justify-content-center gap-2">
                        <a href="/profile/edit" class="btn btn-primary">
                            <i class="fas fa-edit me-1"></i>Edit Profile
                        </a>
                        <% if (user.profile.profileImage) { %>
                            <form method="POST" action="/profile/remove-picture" class="d-inline" 
                                  onsubmit="return confirm('Are you sure you want to remove your profile picture?')">
                                <button type="submit" class="btn btn-outline-danger">
                                    <i class="fas fa-trash me-1"></i>Remove Picture
                                </button>
                            </form>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Profile Details -->
        <div class="col-md-6 mb-4">
            <div class="card h-100">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-user me-2"></i>Personal Information
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>Full Name:</strong></div>
                        <div class="col-sm-8">
                            <%= user.profile.fullName || 'Not provided' %>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>Email:</strong></div>
                        <div class="col-sm-8">
                            <a href="mailto:<%= user.email %>" class="text-decoration-none">
                                <%= user.email %>
                            </a>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>Phone:</strong></div>
                        <div class="col-sm-8">
                            <% if (user.profile.phone) { %>
                                <a href="tel:<%= user.profile.phone %>" class="text-decoration-none">
                                    <%= user.profile.phone %>
                                </a>
                            <% } else { %>
                                Not provided
                            <% } %>
                        </div>
                    </div>
                    
                    <% if (user.profile.dateOfBirth) { %>
                        <div class="row mb-3">
                            <div class="col-sm-4"><strong>Date of Birth:</strong></div>
                            <div class="col-sm-8">
                                <%= new Date(user.profile.dateOfBirth).toLocaleDateString() %>
                            </div>
                        </div>
                    <% } %>
                    
                    <% if (user.profile.address) { %>
                        <div class="row mb-3">
                            <div class="col-sm-4"><strong>Address:</strong></div>
                            <div class="col-sm-8">
                                <%= user.profile.address %>
                            </div>
                        </div>
                    <% } %>
                </div>
            </div>
        </div>
        
        <!-- Academic Information -->
        <div class="col-md-6 mb-4">
            <div class="card h-100">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-graduation-cap me-2"></i>Academic Information
                    </h5>
                </div>
                <div class="card-body">
                    <% if (user.role === 'student') { %>
                        <div class="row mb-3">
                            <div class="col-sm-4"><strong>Roll Number:</strong></div>
                            <div class="col-sm-8">
                                <%= user.profile.rollNo || 'Not provided' %>
                            </div>
                        </div>
                    <% } %>
                    
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>Course:</strong></div>
                        <div class="col-sm-8">
                            <%= user.profile.course || 'Not provided' %>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>Role:</strong></div>
                        <div class="col-sm-8">
                            <span class="badge <%= user.role === 'admin' ? 'bg-warning text-dark' : 'bg-primary' %>">
                                <%= user.role.charAt(0).toUpperCase() + user.role.slice(1) %>
                            </span>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-sm-4"><strong>Member Since:</strong></div>
                        <div class="col-sm-8">
                            <%= new Date(user.createdAt).toLocaleDateString() %>
                        </div>
                    </div>
                    
                    <% if (user.profile.lastProfileUpdate) { %>
                        <div class="row">
                            <div class="col-sm-4"><strong>Last Updated:</strong></div>
                            <div class="col-sm-8">
                                <%= new Date(user.profile.lastProfileUpdate).toLocaleDateString() %>
                            </div>
                        </div>
                    <% } %>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Quick Actions -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-rocket me-2"></i>Quick Actions
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 mb-2">
                            <a href="/dashboard" class="btn btn-outline-primary w-100">
                                <i class="fas fa-tachometer-alt me-1"></i>Dashboard
                            </a>
                        </div>
                        <div class="col-md-3 mb-2">
                            <a href="/resources" class="btn btn-outline-success w-100">
                                <i class="fas fa-book me-1"></i>Resources
                            </a>
                        </div>
                        <div class="col-md-3 mb-2">
                            <a href="/doubts" class="btn btn-outline-info w-100">
                                <i class="fas fa-comments me-1"></i>Doubts
                            </a>
                        </div>
                        <div class="col-md-3 mb-2">
                            <a href="/notices" class="btn btn-outline-warning w-100">
                                <i class="fas fa-bullhorn me-1"></i>Notices
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
